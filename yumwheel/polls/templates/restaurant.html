{%extends "index.html"%}
{%load static %}

{%block title%}The Yum Wheel suggests you eat at...{%endblock%}
{% block content %}
<style>
#map{
  height:400px;
  width: 100%;
}
</style>
<div id = "map"></div>
<script>
  function initMap(){
    var options = {
      zoom:8,
      center:{lat:39.7285,lng:-121.8375}
    }
    var map = new google.maps.Map(document.getElementById('map'), options);
    if(navigator.geolocation){
      navigator.geolocation.getCurrentPosition(function(position){
        var pos = {
          lat:position.coords.latitude,
          lng:position.coords.longitude
        };
        infoWindow.setPosition(pos);
        infoWindow.setContent('Location found.');
        infoWindow.open(map);
      }, function(){
        handleLocationError(true, infoWindow, map.getCenter());
      });
    }
    else{
      handleLocationError(flase, infoWindow, map.getCenter())
    }
  }

  function handleLocationError(browserHasGeolocation, infoWindow, pos){
    infoWindow.setPosition(pos);
    infoWindow.setContent(browserHasGeolocation ?
                        'Error: The service failed.':
                        'Error: Your browser does not support geolocation.');
    infoWindow.open(map);
  }
</script>
<script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyACc6IrDW1i_Pee4QSl59bySwB0Bq75KdM&libraries=places&callback=initMap"></script>
